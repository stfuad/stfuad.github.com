<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>stfuad.cc - Grid</title>
        <style>
            body {
                height: calc(100vh - 16px);
                width: calc(100vw - 16px);
                background-size: contain;
                background-repeat: no-repeat;
            }

            #controls {
                position: fixed;
                background-color: white;
            }
        </style>
    </head>
    <body>
        <div id="controls">
            <input type="file" id="file-input">
            <fieldset>
                <legend>Grid Controls</legend>

                <table>
                    <tr>
                        <td>Height:</td>
                        <td><input type="number" id="gridHeightInput"></td>
                    </tr>
                    <tr>
                        <td>Width:</td>
                        <td><input type="number" id="gridWidthInput"></td>
                    </tr>
                </table>

                <button type="button" id="reloadGridButton">Reload Grid</button>
            </fieldset>
        </div>

        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                <rect width="40" height="40" fill="none"/>
                <path d="M 40 0 L 0 0 0 40" fill="none" stroke="gray" stroke-width="1"/>
                </pattern>
            </defs>
            
            <rect width="100%" height="100%" fill="url(#grid)" />
        </svg>

        <script>
            let importFile = document.getElementById("file-input");
            importFile.onchange = e => {
                let file = e.target.files[0];

                if (/\.(jpe?g|png|gif)$/i.test(file.name)) { 
                    let reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = () => {
                        document.body.style.backgroundImage = `url(${reader.result})`;
                    }
                }
            }

            let reloadButton = document.getElementById("reloadGridButton");
            reloadButton.onclick = () => {
                let height = document.getElementById("gridHeightInput");
                let width = document.getElementById("gridWidthInput");

                document.querySelector("svg").remove();

                let svg = document.createElement('svg');
                svg.height = "100%";
                svg.width = "100%";
                svg.setAttribute("xmlns", "http://www.w3.org/2000/svg");

                let defs = document.createElement('defs');


                svg.appendChild()
                document.body.appendChild(svg);
            };
        </script>
    </body>
</html>